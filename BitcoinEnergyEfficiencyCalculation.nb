(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     12170,        269]
NotebookOptionsPosition[     11913,        255]
NotebookOutlinePosition[     12269,        271]
CellTagsIndexPosition[     12226,        268]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{"JoulesIn1kWh", ":=", " ", "3600000"}], "\[IndentingNewLine]", 
 RowBox[{"GramsInKilogram", " ", ":=", " ", "1000"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"BTCPerSecond", " ", ":=", 
   RowBox[{"25", " ", "/", 
    RowBox[{"(", 
     RowBox[{"60", " ", "*", " ", "10"}], ")"}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FKgOfCO2PerJoule", "[", "EEff_", "]"}], ":=", " ", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"EEff", " ", "/", " ", "GramsInKilogram"}], " ", ")"}], " ", "/", 
   " ", "JoulesIn1kWh"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FHashPerSecond", "[", "HRate_", "]"}], " ", ":=", " ", 
  RowBox[{"HRate", "*", "1000000000"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FHashPerBTC", "[", "HRate_", "]"}], " ", ":=", " ", 
  RowBox[{
   RowBox[{"FHashPerSecond", "[", "HRate", "]"}], " ", "/", " ", 
   "BTCPerSecond"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"FHashPerJoule", "[", "HEff_", "]"}], " ", ":=", " ", 
   RowBox[{"HEff", " ", "*", " ", "1000000"}]}], " "}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FJoulesPerBTC", "[", 
   RowBox[{"HEff_", ",", " ", "HRate_"}], "]"}], " ", ":=", " ", 
  RowBox[{
   RowBox[{"FHashPerBTC", "[", "HRate", "]"}], "  ", "/", " ", 
   RowBox[{"FHashPerJoule", "[", "HEff", "]"}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"FKgCO2PerBTC", "[", 
    RowBox[{"EEff_", ",", "HEff_", ",", "HRate_"}], "]"}], ":=", " ", 
   RowBox[{
    RowBox[{"FKgOfCO2PerJoule", "[", "EEff", "]"}], " ", "*", " ", 
    RowBox[{"FJoulesPerBTC", "[", 
     RowBox[{"HEff", ",", " ", "HRate"}], "]"}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "ChartDataLocation", " ", ":=", " ", 
   "\"\</Users/rgill/Downloads/chart-data.csv\>\""}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"Get", " ", "chart", " ", "data", " ", "from", " ", 
     RowBox[{"http", ":"}]}], "//", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"blockchain", ".", "info"}], "/", "charts"}], "/", "hash"}], 
     "-", "rate"}]}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"HistoricalHashRate", " ", "=", " ", 
    RowBox[{"Import", "[", 
     RowBox[{"ChartDataLocation", ",", " ", 
      RowBox[{"\"\<DateStringFormat\>\"", "\[Rule]", " ", 
       RowBox[{"{", 
        RowBox[{
        "\"\<Day\>\"", ",", " ", "\"\</\>\"", ",", " ", "\"\<Month\>\"", ",", 
         " ", "\"\</\>\"", ",", " ", "\"\<Year\>\"", ",", " ", "\"\< \>\"", 
         ",", " ", "\"\<Time\>\""}], "}"}]}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"HistoricalHashRateWithAbsoluteTime", "=", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"AbsoluteTime", "[", 
         RowBox[{"HistoricalHashRate", "[", 
          RowBox[{"[", 
           RowBox[{"i", ",", "1"}], "]"}], "]"}], "]"}], ",", 
        RowBox[{"HistoricalHashRate", "[", 
         RowBox[{"[", 
          RowBox[{"i", ",", "2"}], "]"}], "]"}]}], "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{"Length", "[", "HistoricalHashRate", "]"}]}], "}"}]}], 
     "]"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Model", ":=", 
   RowBox[{"Fit", "[", 
    RowBox[{"HistoricalHashRateWithAbsoluteTime", ",", " ", 
     RowBox[{"{", 
      RowBox[{"1", ",", "x", ",", " ", 
       RowBox[{"x", "^", "2"}], ",", " ", 
       RowBox[{"x", "^", "3"}], ",", " ", 
       RowBox[{"x", "^", "4"}], ",", " ", 
       RowBox[{"x", "^", "5"}], ",", " ", 
       RowBox[{"x", "^", "6"}], ",", " ", 
       RowBox[{"x", "^", "7"}]}], "}"}], ",", "x"}], "]"}]}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
   "This", " ", "shows", " ", "our", " ", "fitted", " ", "function", " ", 
    "of", " ", "historial", " ", "hash", " ", "rates", " ", "against", " ", 
    "the", " ", "real", " ", 
    RowBox[{"data", ".", "\[IndentingNewLine]", 
     RowBox[{"Show", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"ListPlot", "[", "newdata", "]"}], ",", "\[IndentingNewLine]", 
       
       RowBox[{"Plot", "[", 
        RowBox[{"Model", ",", " ", 
         RowBox[{"{", 
          RowBox[{"x", ",", 
           RowBox[{"3.58", " ", "*", " ", 
            RowBox[{"10", " ", "^", " ", "9"}]}], ",", 
           RowBox[{"3.805", "*", " ", 
            RowBox[{"10", " ", "^", " ", "9"}]}]}], "}"}], ",", " ", 
         RowBox[{"PlotStyle", "\[Rule]", "Red"}]}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"PlotRange", " ", "\[Rule]", "  ", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"3.58", " ", "*", " ", 
             RowBox[{"10", " ", "^", " ", "9"}]}], ",", 
            RowBox[{"3.635", "*", " ", 
             RowBox[{"10", " ", "^", " ", "9"}]}]}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"0", ",", "100000000"}], "}"}]}], "}"}]}]}], 
      "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", "*)"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"HashRateAtT", "[", 
    RowBox[{"year_", ",", " ", "month_", ",", " ", "day_"}], "]"}], " ", ":=",
    " ", 
   RowBox[{"Model", " ", "/.", " ", 
    RowBox[{"{", 
     RowBox[{"x", " ", "\[Rule]", "  ", 
      RowBox[{"{", 
       RowBox[{"AbsoluteTime", "[", 
        RowBox[{"{", 
         RowBox[{
         "year", ",", "month", ",", "day", ",", " ", "0", ",", "0", ",", 
          "0"}], "}"}], "]"}], "}"}]}], "}"}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Manipulate", "[", "\[IndentingNewLine]", "\t", 
   RowBox[{
    RowBox[{
     RowBox[{"FKgCO2PerBTC", "[", 
      RowBox[{"EEff", ",", "HEff", ",", 
       RowBox[{"HashRateAtT", "[", 
        RowBox[{"Year", ",", " ", "Month", ",", " ", "1"}], "]"}]}], "]"}], 
     "\"\<kg of CO2 per BTC\>\""}], ",", "\[IndentingNewLine]", "\t", 
    RowBox[{"{", 
     RowBox[{"EEff", ",", "0", ",", "1000"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"HEff", ",", "0", ",", "5000"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"Year", ",", "2010", ",", "2025", ",", " ", "1"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{"Month", ",", "1", ",", "12", ",", " ", "1"}], "}"}], ",", 
    "\[IndentingNewLine]", "\t", 
    RowBox[{"Initialization", "\[RuleDelayed]", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"EEff", ":=", "500"}], ";", 
       RowBox[{"HEff", ":=", "2000"}], ";", " ", 
       RowBox[{"Year", ":=", "2014"}], ";", " ", 
       RowBox[{"Month", " ", ":=", " ", "1"}]}], ")"}]}]}], "]"}], 
  "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.608235731627756*^9, 3.608235797301935*^9}, {
   3.608235877137067*^9, 3.608235880273666*^9}, {3.608235948692943*^9, 
   3.608235975833913*^9}, {3.608236125160149*^9, 3.6082361527336397`*^9}, {
   3.608236231936047*^9, 3.6082362369995813`*^9}, {3.608236374686841*^9, 
   3.608236533762027*^9}, {3.608236567690242*^9, 3.608236569176902*^9}, {
   3.608236607422415*^9, 3.608236613004479*^9}, {3.608236809062915*^9, 
   3.608236830295446*^9}, {3.608237042222842*^9, 3.608237051933405*^9}, {
   3.6082370933876038`*^9, 3.608237116016618*^9}, {3.608237176076683*^9, 
   3.608237180044154*^9}, {3.608237214090872*^9, 3.60823735360758*^9}, {
   3.6082373878861427`*^9, 3.608237401508622*^9}, {3.608237484999626*^9, 
   3.608237617564921*^9}, {3.608237792360269*^9, 3.6082377964640408`*^9}, {
   3.6082726191826468`*^9, 3.6082726632155848`*^9}, {3.608272709100642*^9, 
   3.608272718317335*^9}, {3.6082728728090754`*^9, 3.60827290483775*^9}, {
   3.608272965173807*^9, 3.608272979921912*^9}, {3.608273038719575*^9, 
   3.6082730475237207`*^9}, {3.608273266606963*^9, 3.608273275502831*^9}, {
   3.60827331805932*^9, 3.608273430880546*^9}, {3.608273518053743*^9, 
   3.6082735747191563`*^9}, {3.6082736951828136`*^9, 3.608273697630245*^9}, {
   3.6082737560032*^9, 3.608273756345097*^9}, {3.608273839958153*^9, 
   3.608273861018672*^9}, {3.6082740314566317`*^9, 3.6082740951382513`*^9}, {
   3.6082741852040787`*^9, 3.6082742135525513`*^9}, {3.6082743168100986`*^9, 
   3.608274333089116*^9}, {3.60827438703673*^9, 3.6082744035108137`*^9}, {
   3.608274479231001*^9, 3.608274497678302*^9}, {3.6082745279083157`*^9, 
   3.608274668743495*^9}, {3.608274747646538*^9, 3.608274922961681*^9}, {
   3.608274980371663*^9, 3.6082750827474623`*^9}, {3.608275146512187*^9, 
   3.608275207426289*^9}, {3.6082752862851267`*^9, 3.608275392596393*^9}, {
   3.608275428267425*^9, 3.608275429595058*^9}, 3.608275463793055*^9, {
   3.608275497824387*^9, 3.608275531603127*^9}, {3.608275594039818*^9, 
   3.608275660689576*^9}, {3.608275699192073*^9, 3.608275709229829*^9}, {
   3.608275786881956*^9, 3.608275790593378*^9}, {3.608275898072896*^9, 
   3.6082759258376923`*^9}, {3.608276041810306*^9, 3.608276073893158*^9}, {
   3.60827611400865*^9, 3.6082761952609167`*^9}, {3.608276249800314*^9, 
   3.608276266958227*^9}, {3.608276338312924*^9, 3.608276349919248*^9}, {
   3.608276464773288*^9, 3.608276477143792*^9}, {3.60827654362043*^9, 
   3.608276551370318*^9}, {3.608276614790379*^9, 3.6082766180453253`*^9}, {
   3.6082766934168053`*^9, 3.608276716288054*^9}, {3.608276771019371*^9, 
   3.6082767751146193`*^9}, {3.608276867853601*^9, 3.608276967343885*^9}, {
   3.608277039151428*^9, 3.608277039511813*^9}, {3.608277090973404*^9, 
   3.608277114234755*^9}, {3.60827714604081*^9, 3.608277153952167*^9}, {
   3.608277218708889*^9, 3.6082774130611477`*^9}, {3.6082774466491947`*^9, 
   3.608277540161837*^9}, {3.608277712144474*^9, 3.608277806688903*^9}, 
   3.6082782411855183`*^9, {3.608278328112959*^9, 3.608278331053667*^9}, {
   3.608278418334474*^9, 3.608278424220038*^9}, {3.6082784688493233`*^9, 
   3.608278497914301*^9}, {3.608278603846374*^9, 3.608278666034149*^9}, {
   3.6082788262890663`*^9, 3.608278874500225*^9}, {3.608279014579756*^9, 
   3.608279044617888*^9}, {3.6082792632886553`*^9, 3.6082792902873487`*^9}, {
   3.608279342452224*^9, 3.608279362066938*^9}, {3.608279392274454*^9, 
   3.608279429142252*^9}, {3.608279459388053*^9, 3.608279511200604*^9}, {
   3.6082795484786386`*^9, 3.608279596449795*^9}, {3.6082798539208508`*^9, 
   3.60828007092793*^9}, {3.608280159656961*^9, 3.608280168494425*^9}, {
   3.608280284200306*^9, 3.608280285223402*^9}, {3.608280402791172*^9, 
   3.60828040303935*^9}, {3.608280530276238*^9, 3.608280653845183*^9}, {
   3.6082807675975733`*^9, 3.608280767724751*^9}, {3.6082808075060797`*^9, 
   3.608280854425646*^9}, {3.6082808965649433`*^9, 3.6082810542573853`*^9}, 
   3.608281225842382*^9, {3.6082812593499107`*^9, 3.608281310106694*^9}, 
   3.608281343590786*^9, {3.6082813884425907`*^9, 3.60828147162689*^9}, {
   3.6082820353956738`*^9, 3.608282073737376*^9}, {3.608284075150236*^9, 
   3.608284095991905*^9}, {3.608284149417974*^9, 3.608284246002699*^9}, {
   3.6082842941786957`*^9, 3.608284311550127*^9}, {3.6082843547650414`*^9, 
   3.6082843647009*^9}, 3.60828439470949*^9, 3.608284434368043*^9, {
   3.608284499985745*^9, 3.608284517788927*^9}, {3.608284555568775*^9, 
   3.608284591975337*^9}, {3.608284633458611*^9, 3.6082846736429787`*^9}}]
},
WindowSize->{1440, 782},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
FrontEndVersion->"9.0 for Mac OS X x86 (32-bit, 64-bit Kernel) (November 20, \
2012)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[557, 20, 11352, 233, 624, "Input"]
}
]
*)

(* End of internal cache information *)
